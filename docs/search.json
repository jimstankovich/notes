[
  {
    "objectID": "bang_pho.html",
    "href": "bang_pho.html",
    "title": "Bang Pho",
    "section": "",
    "text": "Bang Pho is the name of an intersection and a train station near where I live. According to the dictionary here:\n\nBang (written บาง in Thai) means “locality along a waterway”. This is like the “Bang” in Bangkok, and Bangkok is full of places next to waterways, for example Bang Sue, Bang Khae, Bang Kapi, and Bang Rak.\nPho (โพ) is a bo/bodhi/pipal tree, a type of fig tree (ficus religiosa). “Pho” is pronounced like the start of “post”, not like the famous soup from Vietnam."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About this site",
    "section": "",
    "text": "I’m planning to put some notes on data, statistics and R here, along with a bit of other stuff.\nI moved to Bangkok, Thailand in February 2024. Before that I worked as an applied statistician in Australia. You can see some details\n\nin my ORCID record,\non Google Scholar,\nor in my CV.\n\n\n\n Bang Pho"
  },
  {
    "objectID": "bangkok.html",
    "href": "bangkok.html",
    "title": "Life in Thailand",
    "section": "",
    "text": "Bang Pho: where I live\nLearning Thai\nMissing Hobart Library: places to sit and work/study in Bangkok"
  },
  {
    "objectID": "learning_thai.html",
    "href": "learning_thai.html",
    "title": "Learning Thai",
    "section": "",
    "text": "Over the past few months I’ve been enjoying Thai lessons at the Sumaa Language and Culture Institute. Previously I learnt Thai and did a study tour in Thailand with the amazing Ajarn Chintana Sandilands at Australian National University.\nHere’s another website I maintain with some attempts to translate Thai into English.\nMy favourite online Thai-English dictionaries:\n\nSEAlang Library Thai\nNAVER English-Thai Dictionary\nthailanguage.com"
  },
  {
    "objectID": "statistics_websites.html",
    "href": "statistics_websites.html",
    "title": "Websites",
    "section": "",
    "text": "MSNI stats tips\nBiostatistics Blog. I worked on this blog many years ago with some former colleagues in Hobart. Several of them currently teach a course Introduction to Biostatistics at the University of Tasmania.\nStatistics, Data, Science: Michael Clark’s website, particularly his very insightful notes on mixed models."
  },
  {
    "objectID": "statistics_websites.html#statistics",
    "href": "statistics_websites.html#statistics",
    "title": "Websites",
    "section": "",
    "text": "MSNI stats tips\nBiostatistics Blog. I worked on this blog many years ago with some former colleagues in Hobart. Several of them currently teach a course Introduction to Biostatistics at the University of Tasmania.\nStatistics, Data, Science: Michael Clark’s website, particularly his very insightful notes on mixed models."
  },
  {
    "objectID": "statistics_websites.html#quarto",
    "href": "statistics_websites.html#quarto",
    "title": "Websites",
    "section": "Quarto",
    "text": "Quarto\nI couldn’t have made this website without\n\nthe notes Happy Git and GitHub for the useR written by Jenny Bryan and others, and\nthe template made by Joyce Robbins, along with her video demonstration. I have to follow this video every time I update the website. :)"
  },
  {
    "objectID": "introduction_to_R.html",
    "href": "introduction_to_R.html",
    "title": "Data analysis using R: an introduction",
    "section": "",
    "text": "Things to add, as discussed in the meeting on 30 June"
  },
  {
    "objectID": "introduction_to_R.html#why-use-r-and-rstudio",
    "href": "introduction_to_R.html#why-use-r-and-rstudio",
    "title": "Data analysis using R: an introduction",
    "section": "2.1 Why use R and RStudio?",
    "text": "2.1 Why use R and RStudio?\nResearch is a multi-step process: once you’ve designed an experiment and collected data, the real fun begins with analysis! In this section, we look at some of the fundamentals of the R language as well as some best practices for organizing code for research projects that will make your life easier.\nAlthough we could use a spreadsheet in Microsoft Excel or Google sheets to analyze our data, these tools are limited in their flexibility and accessibility. Critically, they also are difficult to share steps which explore and change the raw data, which is key to “reproducible” research.\nTherefore, these notes will help you begin exploring your data using R and RStudio. The R program is available for Windows, Mac, and Linux operating systems, and is a freely-available where you downloaded it above. To run R, all you need is the R program.\nHowever, to make using R easier, we will use the program RStudio, which we also downloaded above. RStudio is a free, open-source, Integrated Development Environment (IDE). It provides a built-in editor, works on all platforms (including on servers) and provides many advantages such as integration with version control and project management."
  },
  {
    "objectID": "introduction_to_R.html#overview",
    "href": "introduction_to_R.html#overview",
    "title": "Data analysis using R: an introduction",
    "section": "2.2 Overview",
    "text": "2.2 Overview\nWe will begin with raw data, perform exploratory analyses, and learn how to plot results graphically. This example starts with data from gapminder.org, containing yearly statistics for many countries through time. Can you read the data into R? Can you plot the population for Indonesia? Can you calculate the average income for ASEAN countries? By the end of these lessons you will be able to do things like plot the populations for all of these countries in under a minute!\nBasic layout\nWhen you first open RStudio, you will see three panels:\n\nThe interactive R console/Terminal (entire left)\nEnvironment/History/Connections (tabbed in upper right)\nFiles/Plots/Packages/Help/Viewer (tabbed in lower right)\n\n\nOnce you open files, such as R scripts, an editor panel will also open in the top left. You can start a new R script by going to the “File” menu, and choosing “New File”, then “R script” (both of these choices are at the top).\n\n\n\n\n\n\n\nR Scripts\n\n\n\nAny commands that you write in the R console can be saved to a file to be re-run again. Files containing R code to be ran in this way are called R scripts. R scripts have .R at the ends of their names to let you know what they are."
  },
  {
    "objectID": "introduction_to_R.html#workflow-within-rstudio",
    "href": "introduction_to_R.html#workflow-within-rstudio",
    "title": "Data analysis using R: an introduction",
    "section": "2.3 Workflow within RStudio",
    "text": "2.3 Workflow within RStudio\nThere are two main ways you can work in RStudio:\n\nTest and play within the interactive R console then copy code into a .R file to run later.\n\nThis works well when doing small tests and initially starting off.\nIt quickly becomes laborious\n\nStart writing in a .R file and use RStudio’s short cut keys for the Run command to push the current line, selected lines or modified lines to the interactive R console.\n\nThis is a great way to start; all your code is saved for later\nYou will be able to run the file you create from within RStudio or R’s source function.\n\n\n\n\n\n\n\n\nTip: Running Segments of Your Code\n\n\n\nRStudio offers you several ways to run code from within the editor window. To run the current line, you can\n1. click on the Run button above the editor panel, or\n2. select “Run Lines” from the “Code” menu, or\n3. hit Ctrl+Return in Windows or Linux or ⌘+Return on OS X. \nTo run several lines of code (instead of just one), select the lines first and then use one of these 3 methods."
  },
  {
    "objectID": "introduction_to_R.html#introduction-to-r",
    "href": "introduction_to_R.html#introduction-to-r",
    "title": "Data analysis using R: an introduction",
    "section": "2.4 Introduction to R",
    "text": "2.4 Introduction to R\nMuch of your time in R will be spent in the R interactive console. This is where you will run all of your code, and can be a useful environment to try out ideas before adding them to an R script file.\nThe first thing you will see in the R interactive session is a bunch of information, followed by a “&gt;” and a blinking cursor. Here you type in commands, R tries to execute them, and then returns a result."
  },
  {
    "objectID": "introduction_to_R.html#using-r-as-a-calculator",
    "href": "introduction_to_R.html#using-r-as-a-calculator",
    "title": "Data analysis using R: an introduction",
    "section": "2.5 Using R as a calculator",
    "text": "2.5 Using R as a calculator\nThis is the simplest thing you can do with R.\nIf you type\n1 + 100\nin the console and press return, it shows the answer (101) with [1] in front of it:\n[1] 101\nWe’ll discuss the [1] later.\nIf you type an incomplete command, like\n3 - (instead of 3 - 2 )\nand press return, R will show a\n+\nto indicate that it is expecting something else. If you want to cancel a command you can hit Esc and RStudio will give you back the &gt; prompt.\nFrom now on in these notes, we’ll show R commands and the results they give like this:\n\n1 + 100\n\n[1] 101\n\n\nwith the R commands in a grey box and the results in a pale purple box. You can copy the R commands by hovering on the right edge of the grey box and clicking on the clipboard. Don’t just read the commands… copy and paste them into RStudio, run them for yourself, try changing them, and see what happens!\nWhen using R was a calculator, the order of operations is the same as you learned in school. Things are executed in this order:\n\nBrackets (, )\nRaise one number to the power of another number: ^ or ** (can use either symbol)\nMultiply * and divide /\nAdd + and subtract -\n\nFor example, compare the difference between\n\n3 + 5 * 2\n\n[1] 13\n\n\nand\n\n(3 + 5) * 2\n\n[1] 16\n\n\nLarge and small numbers, for example the population of China in 2022 (1.43 billion), are written in scientific notation:\n\n1430000000\n\n[1] 1.43e+09\n\n\ne+09 is another way of writing for “multiplied by 10 to the power 9” (or *10^9), and 10 to the power 9 is one billion\n\n1.43 * 10^9\n\n[1] 1.43e+09"
  },
  {
    "objectID": "introduction_to_R.html#functions",
    "href": "introduction_to_R.html#functions",
    "title": "Data analysis using R: an introduction",
    "section": "2.6 Functions",
    "text": "2.6 Functions\nR can also do other things you can do with a calculator. For example, to calculate the square-root of 36, type\n\nsqrt(36)\n\n[1] 6\n\n\nThe command sqrt is known as a function. R has many built in functions: some do maths like sqrt, and some do other things. To call a function, type its name, followed by opening and closing brackets. Some functions take arguments as inputs (things typed inside the brackets). For example sqrt takes a single number as an argument (36 in the example above), and calculates its square root.\nSome functions don’t take any arguments:\n\ngetRversion() # Check what version of R you are using\n\n[1] '4.4.1'\n\n\n\ngetwd() # Check which folder any files will be written in if you decide to save something\n\n[1] \"/Users/jimstankovich/Documents/GitHub/notes\"\n\n\n(Here we have added comments to help explain our R commands. Anything on a line after a # is ignored by R, so it is a good place to write comments.)\nOther functions take different types of arguments, for example\n\npaste0(1,\" dog\",\" and \",\"1\",\"2\", \" cats\")\n\n[1] \"1 dog and 12 cats\"\n\n\nThis example shows that R works with text as well as numbers.\nDon’t worry about trying to remember every function in R. You can look them up on Google, or if you can remember the start of the function’s name, type it and RStudio will provide some suggestions for the end of the name. For example, if you type sq, RStudio will list various functions starting with “sq”, including sqrt().\nTyping a ? before the name of a command will open the help page for the command on the bottom right. The help page includes a detailed description of the command and how it works. The bottom of the help page will usually has examples of how to use the command. (This is often the most useful part of the help page!)"
  },
  {
    "objectID": "introduction_to_R.html#objects-giving-names-to-pieces-of-information",
    "href": "introduction_to_R.html#objects-giving-names-to-pieces-of-information",
    "title": "Data analysis using R: an introduction",
    "section": "2.7 Objects: giving names to pieces of information",
    "text": "2.7 Objects: giving names to pieces of information\nA key concept in R, and in any programming language, is to give names to pieces of data. You can give names to single numbers, a bit like x’s and y’s in algebra you did in high school, or to huge tables of data. Any name (like x or y) with something assigned to it is called an r(em2(\"object\")).\nThe -&gt; symbol is used to assign some data to an object. For example, the command\n\nx &lt;- 9\n\ncreates an object called x, and sets x equal to 9.\nTo check what value an object has, just type the name of the object:\n\nx\n\n[1] 9\n\n\nOnce x has been assigned a value, we can use it for calculations:\n\nx + 3\n\n[1] 12\n\nsqrt(x)\n\n[1] 3\n\nx^2 + 2*x + 1\n\n[1] 100\n\n(x+1)^2\n\n[1] 100\n\n\nYou can also assign a new value to x\n\nx &lt;- 42\nx\n\n[1] 42\n\n\nNote that the command x &lt;- 42 changes the value of x, but it doesn’t show us what the new value of x is. The x on the line below asks R to show us the value of x.\nYou can also change the value of x based on what its previous value was:\n\nx &lt;- x + 1\nx\n\n[1] 43\n\n\nTo interpret the command x &lt;- x + 1, start on the right. x + 1 means take the current value of x (42) and add 1 to it (43). The arrow pointing to the left says: take the new value you calculated on the right (43) and assign it to the thing on the left (x).\nIf you prefer, you can use longer names for objects that are more informative than x, such as\n\npopulation_of_thailand_2022 &lt;- 71.7 * 10^6\n\n\nthailandPop22 &lt;- 71.7 * 10^6\n\nThese names can only include letters, numbers, _, and ., and names must start with a letter. So the following names are invalid:\n\n22pop (cannot start with numbers)\nthailand pop (cannot have spaces)\npop-22 (cannot have a -)\n\nIf you use long names, you don’t have to type them in full every time. Once RStudio knows that you have created an object called population_of_thailand_2022, it will suggest the full name after you type the first few characters.\n\n\n\n\n\n\nExercise\n\n\n\nWhat are the values of mass and age after the following commands are run?\n\nmass &lt;- 47.5\nage &lt;- 122\nmass &lt;- mass * 2.3\nage &lt;- age - 20\n\n\n\n\n\n\n\n\n\nClick to see the solution\n\n\n\n\n\n\nmass &lt;- 47.5\n\nThis gives the object mass a value of 47.5.\n\nage &lt;- 122\n\nThis gives the object mass a value of 122.\n\nmass &lt;- mass * 2.3\n\nThis takes the existing value of mass (47.5) and multiplies it by 2.3 to give it a new value of 109.25.\n\nage &lt;- age - 20\n\nThis will subtract 20 from the existing value of 122 to give age a new value of 102.\n\n\n\nObjects can store other types of information, not just numbers. For example, they can store text:\n\nname_of_country &lt;- \"Thailand\"\n\nObjects can also store more than one piece of information, not just a single number or a single piece of text. Two of the most important types of objects in R with multiple pieces of information are vectors and data.frames."
  },
  {
    "objectID": "introduction_to_R.html#vectors",
    "href": "introduction_to_R.html#vectors",
    "title": "Data analysis using R: an introduction",
    "section": "2.8 Vectors",
    "text": "2.8 Vectors\nA vector is an object containing a list of things, where everything in list has the same basic data type. For example, everything in the vector can be a piece of text, or everything can be a number.\nWe can create vectors by using the R function c(), which “combines” or “concatenates” pieces of information. For example, here is a command to create a vector with 10 pieces of information: the names of the 10 ASEAN countries\n\nASEAN_countries &lt;- c(\"Brunei\",\"Cambodia\",\"Indonesia\",\n                     \"Lao\",\"Myanmar\",\"Malaysia\",\"Philippines\",\n                     \"Singapore\",\"Thailand\",\"Vietnam\")\nASEAN_countries\n\n [1] \"Brunei\"      \"Cambodia\"    \"Indonesia\"   \"Lao\"         \"Myanmar\"    \n [6] \"Malaysia\"    \"Philippines\" \"Singapore\"   \"Thailand\"    \"Vietnam\"    \n\n\n\nnumbers_less_than_10 &lt;- c(1,2,3,4,5,6,7,8,9)\nnumbers_less_than_10\n\n[1] 1 2 3 4 5 6 7 8 9\n\n\n\nclaims_made_by_Australian_politician &lt;- c(F,F,F,T,F)\nclaims_made_by_Australian_politician\n\n[1] FALSE FALSE FALSE  TRUE FALSE\n\n\nNote that you can use F and T as abbreviations for FALSE and TRUE.\nR has special notation (:) to make lists of consecutive numbers:\n\nnumbers_less_than_10 &lt;- 1:9\nnumbers_less_than_10\n\n[1] 1 2 3 4 5 6 7 8 9\n\n\nNote the [6] in the vector ASEAN_countries. This indicates that \"Malaysia\" is the 6th element of the vector (and [1] indicates that \"Brunei\" is the 1st element of the vector). We can use square brackets to refer to individual elements of vectors\n\nASEAN_countries[6]\n\n[1] \"Malaysia\"\n\nASEAN_countries[3]\n\n[1] \"Indonesia\"\n\n\nor subsets of vectors\n\ncountries_sharing_borders_with_Thailand &lt;- ASEAN_countries[c(2,4:6)]\ncountries_sharing_borders_with_Thailand\n\n[1] \"Cambodia\" \"Lao\"      \"Myanmar\"  \"Malaysia\"\n\ncountries_on_Mekong_River &lt;- ASEAN_countries[c(2,4,5,9,10)]\ncountries_on_Mekong_River\n\n[1] \"Cambodia\" \"Lao\"      \"Myanmar\"  \"Thailand\" \"Vietnam\" \n\n\nSome numerical operations can be applied to vectors of numbers, just as they are applied to individual numbers:\n\nnumbers_less_than_10 + 3\n\n[1]  4  5  6  7  8  9 10 11 12\n\neven_numbers &lt;- numbers_less_than_10 * 2\neven_numbers\n\n[1]  2  4  6  8 10 12 14 16 18\n\nsquare_numbers &lt;- numbers_less_than_10 * numbers_less_than_10\nsquare_numbers\n\n[1]  1  4  9 16 25 36 49 64 81"
  },
  {
    "objectID": "introduction_to_R.html#joining-vectors-of-the-same-length-to-make-a-data.frame",
    "href": "introduction_to_R.html#joining-vectors-of-the-same-length-to-make-a-data.frame",
    "title": "Data analysis using R: an introduction",
    "section": "2.9 Joining vectors of the same length to make a data.frame",
    "text": "2.9 Joining vectors of the same length to make a data.frame\nIf we have 2 or more vectors of the same length, we can join them to make a table of data with multiple columns, one vector in each column, like something you might enter into a spreadsheet. In R, a table of data is called a data.frame. To make a data.frame, lets combine our vector ASEAN_countries with a vector of national dishes:\n\nnational_dish &lt;- c(\"ambuyat\", \"amok\", \"gado-gado\", \"chicken soup\", \"lahpet\", \"nasi lemak\", \"adobo\", \"laksa\", \"tom yum goong\", \"nem\")\nnational_dish\n\n [1] \"ambuyat\"       \"amok\"          \"gado-gado\"     \"chicken soup\" \n [5] \"lahpet\"        \"nasi lemak\"    \"adobo\"         \"laksa\"        \n [9] \"tom yum goong\" \"nem\"          \n\n\nWe can double-check that the two vectors ASEAN_countries and national_dish have the same length, using a function called length():\n\nlength(ASEAN_countries)\n\n[1] 10\n\nlength(national_dish)\n\n[1] 10\n\n\nand join the vectors together to make a data.frame, which we’ll call ASEAN_info:\n\nASEAN_info &lt;- data.frame(ASEAN_countries, national_dish)\nASEAN_info\n\n   ASEAN_countries national_dish\n1           Brunei       ambuyat\n2         Cambodia          amok\n3        Indonesia     gado-gado\n4              Lao  chicken soup\n5          Myanmar        lahpet\n6         Malaysia    nasi lemak\n7      Philippines         adobo\n8        Singapore         laksa\n9         Thailand tom yum goong\n10         Vietnam           nem\n\n\nI would prefer to call the first column (or vector) country instead of ASEAN_countries. So let’s change the name of this column using R’s colnames() function:\n\ncolnames(ASEAN_info)\n\n[1] \"ASEAN_countries\" \"national_dish\"  \n\ncolnames(ASEAN_info)[1] &lt;- \"country\"\nASEAN_info\n\n       country national_dish\n1       Brunei       ambuyat\n2     Cambodia          amok\n3    Indonesia     gado-gado\n4          Lao  chicken soup\n5      Myanmar        lahpet\n6     Malaysia    nasi lemak\n7  Philippines         adobo\n8    Singapore         laksa\n9     Thailand tom yum goong\n10     Vietnam           nem\n\n\nWe can select individual vectors in our data.frame by writing the vector’s name after the name of the data.frame, separated by $:\n\nASEAN_info$country\n\n [1] \"Brunei\"      \"Cambodia\"    \"Indonesia\"   \"Lao\"         \"Myanmar\"    \n [6] \"Malaysia\"    \"Philippines\" \"Singapore\"   \"Thailand\"    \"Vietnam\"    \n\nASEAN_info$national_dish\n\n [1] \"ambuyat\"       \"amok\"          \"gado-gado\"     \"chicken soup\" \n [5] \"lahpet\"        \"nasi lemak\"    \"adobo\"         \"laksa\"        \n [9] \"tom yum goong\" \"nem\""
  },
  {
    "objectID": "introduction_to_R.html#checking-whether-statements-are-true-or-false",
    "href": "introduction_to_R.html#checking-whether-statements-are-true-or-false",
    "title": "Data analysis using R: an introduction",
    "section": "2.10 Checking whether statements are TRUE or FALSE",
    "text": "2.10 Checking whether statements are TRUE or FALSE\nR can check whether particular statements are TRUE or FALSE. This is very useful for selecting rows of large data.frames meeting particular conditions.\nFor example, we can check whether\n\n5 &gt; 4\n\n[1] TRUE\n\n\nor\n\nsqrt(49) &lt; 7\n\n[1] FALSE\n\n\nAs well as the comparisons “greater than” (&gt;) and “less than” (&lt;), we can also make the comparisons\n\n&gt;= (greater than or equal to)\n&lt;= (less than or equal to)\n== (equal to)\n!= (not equal to)\n\nThese comparisons can be applied to vectors as well as individual variables. The comparisons == (equal to) and != (not equal to) can also be applied to text as well as numbers.\nFor example\n\ny &lt;- ASEAN_countries != \"Singapore\"\nz &lt;- ASEAN_countries == \"Vietnam\"\ndata.frame(ASEAN_info, y, z)\n\n       country national_dish     y     z\n1       Brunei       ambuyat  TRUE FALSE\n2     Cambodia          amok  TRUE FALSE\n3    Indonesia     gado-gado  TRUE FALSE\n4          Lao  chicken soup  TRUE FALSE\n5      Myanmar        lahpet  TRUE FALSE\n6     Malaysia    nasi lemak  TRUE FALSE\n7  Philippines         adobo  TRUE FALSE\n8    Singapore         laksa FALSE FALSE\n9     Thailand tom yum goong  TRUE FALSE\n10     Vietnam           nem  TRUE  TRUE\n\nover50 &lt;- square_numbers &gt; 50\ndata.frame(square_numbers, over50)\n\n  square_numbers over50\n1              1  FALSE\n2              4  FALSE\n3              9  FALSE\n4             16  FALSE\n5             25  FALSE\n6             36  FALSE\n7             49  FALSE\n8             64   TRUE\n9             81   TRUE\n\n\nAnother useful option of checking whether something is TRUE or FALSE is to use the operator %in%. You can use this to check whether a particular value is in a vector, or which elements of one vector are in another vector. For example\n\n\"Brunei\" %in% ASEAN_countries\n\n[1] TRUE\n\n\"East Timor\" %in% ASEAN_countries\n\n[1] FALSE\n\nis_square_number &lt;- numbers_less_than_10 %in% square_numbers\ndata.frame(numbers_less_than_10, is_square_number)\n\n  numbers_less_than_10 is_square_number\n1                    1             TRUE\n2                    2            FALSE\n3                    3            FALSE\n4                    4             TRUE\n5                    5            FALSE\n6                    6            FALSE\n7                    7            FALSE\n8                    8            FALSE\n9                    9             TRUE\n\n\nWe can use %in% to add a column to our ASEAN_info data.frame, showing which ASEAN countries the Mekong River runs through:\n\non_Mekong_River &lt;- ASEAN_countries %in% countries_on_Mekong_River\nASEAN_info &lt;- data.frame(ASEAN_info, on_Mekong_River)\nASEAN_info\n\n       country national_dish on_Mekong_River\n1       Brunei       ambuyat           FALSE\n2     Cambodia          amok            TRUE\n3    Indonesia     gado-gado           FALSE\n4          Lao  chicken soup            TRUE\n5      Myanmar        lahpet            TRUE\n6     Malaysia    nasi lemak           FALSE\n7  Philippines         adobo           FALSE\n8    Singapore         laksa           FALSE\n9     Thailand tom yum goong            TRUE\n10     Vietnam           nem            TRUE"
  },
  {
    "objectID": "introduction_to_R.html#sec-packages",
    "href": "introduction_to_R.html#sec-packages",
    "title": "Data analysis using R: an introduction",
    "section": "2.11 R packages",
    "text": "2.11 R packages\nIt is possible to add functions to R by writing a package, or by obtaining a package written by someone else. Packages are sometimes also called libraries. There are over 10,000 packages in a public collection called CRAN (the comprehensive R archive network). R and RStudio have functionality for managing packages:\n\nYou can see what packages are installed by typing installed.packages()\nYou can install packages by typing install.packages(\"packagename\"), where packagename is the package name, in quotes.\nYou can update installed packages by typing update.packages()\nYou can remove a package with remove.packages(\"packagename\")\nYou can make a package available for use with library(packagename)\n\nPackages can also be viewed, loaded, and detached in the Packages tab of the lower right panel in RStudio. Clicking on this tab will display all of the installed packages with a checkbox next to them. If the box next to a package name is checked, the package is loaded and if it is empty, the package is not loaded. Click an empty box to load that package and click a checked box to detach that package.\nPackages can be installed and updated from the Package tab with the Install and Update buttons at the top of the tab.\nBelow we will discuss 3 packages with some very useful functions:\n\nreadr for loading datasets into R from spreadsheets and CSV files,\ndplyr for managing datasets, and\nggplot2 for making graphs.\n\nBut before we can use these packages, we need to install them.\n\n\n\n\n\n\nExercise\n\n\n\nInstall the packages dplyr, readrand ggplot2.\n\n\n\n\n\n\n\n\nClick to see the solution\n\n\n\n\n\nWe can use the install.packages() command to install the required packages.\n\ninstall.packages(\"readr\")\ninstall.packages(\"dplyr\")\ninstall.packages(\"ggplot2\")"
  },
  {
    "objectID": "introduction_to_R.html#loading-data-with-the-readr-package",
    "href": "introduction_to_R.html#loading-data-with-the-readr-package",
    "title": "Data analysis using R: an introduction",
    "section": "3.1 Loading data with the readr package",
    "text": "3.1 Loading data with the readr package\nLet’s load a small CSV file with some Gapminder data for 10 ASEAN countries. We will use the package readr to do this.\nI have put the CSV file on a webpage here.\nThere are two ways you can load the data into R. You can either download it onto your computer first (Method 1), or you can load it into R directly from the website (Method 2).\n\n3.1.1 Method 1: Download the data onto your computer, then load it from your computer into R\n\nGo to the URL (website) above.\nHover on the little arrow pointing down on the right. The words “Download raw file” will appear in a black box. \nClick on this arrow to download the CSV file.\nFind where the file was downloaded on your computer, and move it to a folder where you want to keep it.\nIn the “Files” window of RStudio (bottom right), navigate to the folder where you put the data, select the file, and choose “Import Dataset…” \nA new window appears, giving you some options to control how you open the file. In this case the default settings are fine… you don’t need to change anything. So just click “Import” on the bottom right to load the data. Note that the 3 R commands which will be run appear in a box on the bottom right. \nThese 3 commands run in the Console window on the bottom left. The folder in the second line will be different on your computer (not the same as \"~/Documents/Research Methodology in Social Sciences/introduction_to_R/data/\"), depending on where you put the file asean_2022_data.csv.\nCopy these 3 commands to your .R file so you can run them automatically next time, without having to open windows and click in them. This makes your analysis more “reproducible”.\n\nLet’s look at the 3 commands and what they do:\n\nlibrary(readr): The library() function makes the package readr available for use (as mentioned in Section 2.11 above).\nasean_data &lt;- read_csv(\"[path_to_folder]/asean_data.csv\"): The function read_csv is part of the readr package. Here it reads the CSV file asean_data.csv into R’s memory and gives it the name asean_data. (We could call it something else if we wanted to.) Some information appears in the Console window about the data. The country column has text information (character or “chr” for short). The other 4 columns (year, pop, lifeExp, gdpPercap) have numerical information (stored as “double-precision” numbers, or “dbl” for short… don’t worry about this computer science terminology if you haven’t heard it before).\n\n\n\n\n\n\n\nView(asean_data): This command opens a spreadsheet-style view of the data on the top-left. If you close this window the data is stored in R… it is just a “view” of the data.\n\n\n\n\n\n\nWhen you load the data, asean_data also appears in the “Environment” window on the top-right. If you click the little blue arrow, it provides some information on the variables in the data:\n\n\n\n\n\nIn summary, 3 of the 4 windows in RStudio are showing similar information about the data we have just loaded. :) It is up to you to decide which way(s) of looking at the data are most helpful.\nYet another way to look at the data is to type the name of the dataset in the Console window:\n\nasean_data\n\n# A tibble: 20 × 5\n   country      year       pop lifeExp gdpPercap\n   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1 Brunei       2012    407000    74       67800\n 2 Brunei       2022    449000    74.2     58700\n 3 Indonesia    2012 250000000    69.8      9020\n 4 Indonesia    2022 276000000    69.1     12400\n 5 Cambodia     2012  14800000    67.9      3020\n 6 Cambodia     2022  16800000    69.1      4530\n 7 Lao          2012   6510000    66.2      5430\n 8 Lao          2022   7530000    69.8      7950\n 9 Myanmar      2012  50200000    66.1      3190\n10 Myanmar      2022  54200000    70.1      4120\n11 Malaysia     2012  29700000    74.8     21700\n12 Malaysia     2022  33900000    75.5     28300\n13 Philippines  2012  98000000    70.7      6300\n14 Philippines  2022 116000000    72.2      8580\n15 Singapore    2012   5380000    83.3     82900\n16 Singapore    2022   5980000    85.2    108000\n17 Thailand     2012  69200000    77.7     15100\n18 Thailand     2022  71700000    79.1     17500\n19 Vietnam      2012  89300000    73.5      6950\n20 Vietnam      2022  98200000    75       11400\n\n\n\n\n3.1.2 Method 2: Download the data directly into R from the internet\nStarting at the same URL as before (https://github.com/jimstankovich/notes/blob/main/data/asean_data.csv), click on the word “Raw” on the top right. This takes you take another webpage with the “raw” (unformatted) CSV data. You can use the read_csv command to load the data from this webpage:\n\nlibrary(readr)\nasean_data &lt;- read_csv(\"https://raw.githubusercontent.com/jimstankovich/notes/main/data/asean_data.csv\")\n\nMethod 2 is fine for the small dataset we are looking at here. However, if you are running your R commands many times and working with a large dataset, it is better to download the dataset onto your computer first (Method 1), rather than downloading a large dataset many times."
  },
  {
    "objectID": "introduction_to_R.html#using-the-dplyr-package-to-look-at-the-asean_data",
    "href": "introduction_to_R.html#using-the-dplyr-package-to-look-at-the-asean_data",
    "title": "Data analysis using R: an introduction",
    "section": "3.2 Using the dplyr package to look at the asean_data",
    "text": "3.2 Using the dplyr package to look at the asean_data\nI use the dplyr package more than any other packages. It is very useful for managing datasets: cleaning them, joining them, and selecting smaller sections for statistical analysis.\nLet’s look at how a few dplyr functions can be applied to the asean_data.\n\n3.2.1 Calculate the total population of the ASEAN countries\nSuppose we want to know the total population of the 10 ASEAN countries in 2022. We can do this by adding up the values of pop in the rows from 2022. Let’s do this in 2 steps:\n\nCreate a smaller dataset that only includes rows with 2022 data.\nAdd up the values in the column/vector pop.\n\n\nStep 1\ndplyr has a command called filter() for selecting particular rows of a dataset. The filter() command takes two arguments\n\nthe name of a data.frame\na condition to satisfy: only include rows where this condition is TRUE\n\n\nlibrary(dplyr)\nasean_2022 &lt;- filter(asean_data, year == 2022)\nasean_2022\n\n# A tibble: 10 × 5\n   country      year       pop lifeExp gdpPercap\n   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1 Brunei       2022    449000    74.2     58700\n 2 Indonesia    2022 276000000    69.1     12400\n 3 Cambodia     2022  16800000    69.1      4530\n 4 Lao          2022   7530000    69.8      7950\n 5 Myanmar      2022  54200000    70.1      4120\n 6 Malaysia     2022  33900000    75.5     28300\n 7 Philippines  2022 116000000    72.2      8580\n 8 Singapore    2022   5980000    85.2    108000\n 9 Thailand     2022  71700000    79.1     17500\n10 Vietnam      2022  98200000    75       11400\n\n\nMany dplyr functions take the name of a data.frame as the first argument. There is an alternative notation for running these functions, where you put the name of the data.frame before the function, then join it to the function using the symbol %&gt;%\n\nlibrary(dplyr)\nasean_2022 &lt;- asean_data %&gt;%\n  filter(year == 2022)\nasean_2022\n\n# A tibble: 10 × 5\n   country      year       pop lifeExp gdpPercap\n   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1 Brunei       2022    449000    74.2     58700\n 2 Indonesia    2022 276000000    69.1     12400\n 3 Cambodia     2022  16800000    69.1      4530\n 4 Lao          2022   7530000    69.8      7950\n 5 Myanmar      2022  54200000    70.1      4120\n 6 Malaysia     2022  33900000    75.5     28300\n 7 Philippines  2022 116000000    72.2      8580\n 8 Singapore    2022   5980000    85.2    108000\n 9 Thailand     2022  71700000    79.1     17500\n10 Vietnam      2022  98200000    75       11400\n\n\nI think this notation makes it clearer that we are starting with the asean_data data.frame, then applying the filter() function to make changes to it and produce asean_2022.\nThe %&gt;% notation is particularly good when you want to apply several functions to a data.frame. Below are two pieces of code that do the same thing… which do you think is easier to read?\n\nlarge_wealthy_country &lt;- \n  filter(filter(filter(asean_data, year == 2022), \n         gdpPercap &gt; 20000), pop &gt; 10e6)  # 10e6 is 10 million \nlarge_wealthy_country\n\n# A tibble: 1 × 5\n  country   year      pop lifeExp gdpPercap\n  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1 Malaysia  2022 33900000    75.5     28300\n\n\n\nlarge_wealthy_country &lt;- asean_data %&gt;%\n  filter(year == 2022) %&gt;%\n  filter(gdpPercap &gt; 20000) %&gt;%\n  filter(pop &gt; 10e6)  # 10e6 is 10 million\nlarge_wealthy_country\n\n# A tibble: 1 × 5\n  country   year      pop lifeExp gdpPercap\n  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1 Malaysia  2022 33900000    75.5     28300\n\n\n\n\nStep 2\nNow we can use the sum() function to add up the values of pop in asean_2022:\n\nasean_pop_2022 &lt;- sum(asean_2022$pop)\nasean_pop_2022\n\n[1] 680759000\n\n\nSo the total population of the ASEAN countries in 2022 was nearly 681 million. The function sum() is part of “base R”… you don’t need to load dplyr to use it.\n\n\n\n\n\n\nExercise\n\n\n\nUse the filter() function twice to select the row of asean_data containing 2012 statistics for the Philippines.\n\n\n\n\n\n\n\n\nClick to see the solution\n\n\n\n\n\n\nasean_data %&gt;%\n  filter(year == 2012) %&gt;%\n  filter(country == \"Philippines\")\n\n# A tibble: 1 × 5\n  country      year      pop lifeExp gdpPercap\n  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1 Philippines  2012 98000000    70.7      6300\n\n\n\n\n\n\n\n\n\n\n\nExercise\n\n\n\nIn 2012, what was the combined population of the 5 ASEAN countries that the Mekong River flows through?\n\n\n\n\n\n\n\n\nClick to see the solution\n\n\n\n\n\n\nmekong_countries_2012 &lt;- asean_data %&gt;%\n  filter(year == 2012) %&gt;%\n  filter(country %in% countries_on_Mekong_River)\nmekong_countries_2012\n\n# A tibble: 5 × 5\n  country   year      pop lifeExp gdpPercap\n  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n1 Cambodia  2012 14800000    67.9      3020\n2 Lao       2012  6510000    66.2      5430\n3 Myanmar   2012 50200000    66.1      3190\n4 Thailand  2012 69200000    77.7     15100\n5 Vietnam   2012 89300000    73.5      6950\n\nsum(mekong_countries_2012$pop)\n\n[1] 230010000\n\n\n\n\n\n\n\n\n3.2.2 Calculate average GDP per person\nSuppose we want to calculate the average GDP (Gross Domestic Product) per person, averaged across all 681 million people living in ASEAN countries. The GDP figures in this dataset are in 2017 (inflation-adjusted) US dollars at purchasing power parity.\nHere are the steps for calculating average GDP:\n\ncalculate the total GDP for each country\nadd up total GDP across countries\ndivide total ASEAN GDP by the ASEAN population\n\nTotal GDP for each country is equal to the country’s population multiplied by GDP per person (per capita). Let’s add a total_gdp column to the asean_2022 data.frame using a dplyr command called mutate():\n\nasean_2022 &lt;- asean_2022 %&gt;%\n  mutate(gdp = pop * gdpPercap)\nasean_2022\n\n# A tibble: 10 × 6\n   country      year       pop lifeExp gdpPercap           gdp\n   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Brunei       2022    449000    74.2     58700   26356300000\n 2 Indonesia    2022 276000000    69.1     12400 3422400000000\n 3 Cambodia     2022  16800000    69.1      4530   76104000000\n 4 Lao          2022   7530000    69.8      7950   59863500000\n 5 Myanmar      2022  54200000    70.1      4120  223304000000\n 6 Malaysia     2022  33900000    75.5     28300  959370000000\n 7 Philippines  2022 116000000    72.2      8580  995280000000\n 8 Singapore    2022   5980000    85.2    108000  645840000000\n 9 Thailand     2022  71700000    79.1     17500 1254750000000\n10 Vietnam      2022  98200000    75       11400 1119480000000\n\n\nThen we can add up total_gdp across countries using the sum() function again:\n\nasean_gdp_2022 = sum(asean_2022$gdp)\nasean_gdp_2022\n\n[1] 8.782748e+12\n\n\nand calculate\n\nasean_gdp_per_capita_2022 &lt;- asean_gdp_2022 / asean_pop_2022\nasean_gdp_per_capita_2022\n\n[1] 12901.41\n\n\nHere is some dplyr code that starts with our original CSV file (asean_data), and generates a summary of the 2022 population and GDP statistics for the whole of ASEAN.\n\nasean_2022_summary &lt;- asean_data %&gt;%\n  filter(year == 2022) %&gt;%\n  mutate(gdp = pop * gdpPercap) %&gt;%\n  summarise(\n    pop = sum(pop),\n    total_gdp = sum(gdp),\n    gdpPercap = total_gdp / pop)\nasean_2022_summary\n\n# A tibble: 1 × 3\n        pop     total_gdp gdpPercap\n      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 680759000 8782747800000    12901.\n\n\nIt uses filter() and mutate() in the same way we’ve seen before. There is also a new command summarise().\nIf we wanted these statistics for both 2012 and 2022, we could remove the filter() function, keep data for both year, and instead apply another function group_by() before summarise(), to generate summaries for both years at the same time.\n\nasean_gdp_summary &lt;- asean_data %&gt;%\n  mutate(gdp = pop * gdpPercap) %&gt;%\n  group_by(year) %&gt;%\n  summarise(\n    pop = sum(pop),\n    total_gdp = sum(gdp),\n    gdpPercap = total_gdp / pop)\nasean_gdp_summary\n\n# A tibble: 2 × 4\n   year       pop     total_gdp gdpPercap\n  &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1  2012 613497000 5896224900000     9611.\n2  2022 680759000 8782747800000    12901.\n\n\nI don’t think the total_gdp column is very useful… trillions of dollars seem to big to understand. We can select columns to keep using another dplyr command, select():\n\nasean_gdp_summary %&gt;%\n  select(year, pop, gdpPercap)\n\n# A tibble: 2 × 3\n   year       pop gdpPercap\n  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1  2012 613497000     9611.\n2  2022 680759000    12901.\n\n\nOr we can exclude particular columns by putting a - in front of their names:\n\nasean_gdp_summary %&gt;%\n  select(-total_gdp)\n\n# A tibble: 2 × 3\n   year       pop gdpPercap\n  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1  2012 613497000     9611.\n2  2022 680759000    12901.\n\n\n\n\n3.2.3 Calculate average life expectancy\nThese calculations only require some small changes to calculate average life expectancy across ASEAN countries instead of per capita GDP. Instead of multiplying per capita GDP by population, multiply life expectancy by population to give “life expectancy times population”, or “letp” for short.\n\nasean_lifeExp &lt;- asean_data %&gt;%\n  mutate(letp = pop * lifeExp) %&gt;%\n  group_by(year) %&gt;%\n  summarise(\n    pop = sum(pop),\n    letp = sum(letp),\n    lifeExp = letp / pop) %&gt;%\n  select(-letp)\nasean_lifeExp\n\n# A tibble: 2 × 3\n   year       pop lifeExp\n  &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1  2012 613497000    71.3\n2  2022 680759000    72.1\n\n\n\n\n3.2.4 List of dplyr functions we have used\n\nfilter(): for selecting particular rows of a data.frame\nmutate(): for adding a new column (vector) to a data.frame, or to change an existing column\nsummarise(): to calculate things like sums or averages across multiple rows\ngroup_by(): I don’t properly understand all the ways this function is used, but I often use it before summarise(), to calculate summaries by groups (e.g. for different years in the examples above)\nselect(): for selecting particular columns of a data.frame\n\nThere is a useful summary of dplyr commands on this Data Wrangling Cheat Sheet."
  },
  {
    "objectID": "introduction_to_R.html#plotting-data-with-the-ggplot2-package",
    "href": "introduction_to_R.html#plotting-data-with-the-ggplot2-package",
    "title": "Data analysis using R: an introduction",
    "section": "3.3 Plotting data with the ggplot2 package",
    "text": "3.3 Plotting data with the ggplot2 package\nI haven’t used ggplot2 much: I usually plot graphs using “base R” (without using any packages). However, many people recommend ggplot2 for graphs, so I am trying it out. I don’t yet understand the “grammar of graphics” used in ggplot2, so I’m definitely not qualified to teach anyone how to use it! Nevertheless, I’m still including this section to\n\ngive a bit of a flavour of how ggplot2 commands look, and\nhelp persuade you that graphs can be a very useful tool for helping communicate your research findings.\n\nI did a lot of googling to make the graphs below. I have included links to some pages that helped.\nI was impressed how fast it was to make some fairly complicated graphs with ggplot2, so I think I’ll start using it more to explore data. I really like base R for fine-tuning graphs and converting them to pdf files for publications, so I may keep using base R for that.\n\n3.3.1 Bar graphs\n\nlibrary(ggplot2)\n\n#https://r-graph-gallery.com/218-basic-barplots-with-ggplot2.html\n#http://www.sthda.com/english/wiki/ggplot2-title-main-axis-and-legend-titles\n#https://stackoverflow.com/questions/15629192/making-a-bar-chart-in-ggplot-with-vertical-labels-in-x-axis\n#https://www.r-bloggers.com/2021/09/adding-text-labels-to-ggplot2-bar-chart/\n\nggplot(asean_2022, aes(x=country, y=lifeExp)) +\n  geom_bar(fill = \"dodgerblue3\", stat = \"identity\") +\n  ylab(\"Life expectancy at birth (2022)\") +\n  geom_text(aes(label = lifeExp, vjust = 1.2)) + \n  theme_light() + \n  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))\n\n\n\n\n\n\n\n\n\n#https://rpubs.com/dvdunne/ggplot_two_bars\n\nggplot(asean_data, aes(x=country, y=lifeExp, fill=year)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  ylab(\"Life expectancy at birth\") +\n  theme_light() + \n  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))\n\n\n\n\n\n\n\n\nThis is not what we want! Year is being treated as a continuous variable, ranging in value from 2012 to 2022. We can fix this by converting year to a categorical variable (called a factor in R).\n\nasean_data &lt;- asean_data %&gt;%\n  mutate(year = as.factor(year))\nggplot(asean_data, aes(x=country, y=lifeExp, fill=year)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  ylab(\"Life expectancy at birth\") +\n  theme_light() + \n  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))\n\n\n\n\n\n\n\n\n\nlife_exp_table &lt;- asean_data %&gt;%\n  arrange(year) %&gt;% # A new dplyr function to sort rows of a dataset\n  group_by(country) %&gt;%\n  summarise(\n    le2012 = first(lifeExp),\n    le2022 = last(lifeExp),\n    le_change = le2022 - le2012)\n\n\nlibrary(ggplot2)\nggplot(life_exp_table, aes(x=country, y=le_change)) +\n  geom_bar(fill = \"dodgerblue3\", stat = \"identity\") +\n  ylab(\"change in life expectancy (years), 2012 -&gt; 2022\") +\n  geom_text(aes(label = round(le_change,1), vjust = -1)) + \n  theme_light() + \n  theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5)) +\n  #https://ggplot2.tidyverse.org/reference/lims.html\n  ylim(-1, 4.5)\n\n\n\n\n\n\n\n\n\n\n3.3.2 Line graphs showing changes in a variable over time\nTo plot the graphs from now on, you need to download a much bigger CSV file of Gapminder data, called big_gapminder_dataset.csv. It is available here.\n\n# Change the folder below to point to the data you downloaded.\nbig_gapminder_dataset &lt;- read_csv(\"~/Documents/Research Methodology in Social Sciences/introduction_to_R/data/big_gapminder_dataset.csv\",\n        show_col_types = FALSE)\n\nlifeExp_since_1900 &lt;- big_gapminder_dataset %&gt;% \n  filter(year &gt;= 1900 & year &lt;= 2022) %&gt;%\n  select(country, continent, year, lifeExp) %&gt;%\n  mutate(asean = country %in% ASEAN_countries)\n\nasean_lifexp_since_1900 &lt;- lifeExp_since_1900 %&gt;%\n  filter(asean == TRUE)\n\nother_countries &lt;- lifeExp_since_1900 %&gt;%\n  filter(asean == FALSE)\n\n# This palette was recommended for people who are colour-blind\n# https://stackoverflow.com/questions/9563711/r-color-palettes-for-many-data-classes\ncolours1 &lt;- c(\"#88CCEE\", \"#CC6677\", \"#DDCC77\", \"#117733\",\n             \"#332288\", \"#AA4499\", \"#44AA99\", \"#999933\",\n             \"#882255\", \"#661100\")\n\n# Another palette from the start of the same chat\ncolours2 &lt;- c(\n  \"dodgerblue2\", \"#E31A1C\", # red\n  \"green4\",\n  \"#6A3D9A\", # purple\n  \"#FF7F00\", # orange\n  \"black\", \"gold1\",\n  \"skyblue2\", \"#FB9A99\", # lt pink\n  \"palegreen2\")\n# I found it easier to distinguish the countries using this palette\n\nggplot(data = asean_lifexp_since_1900, mapping = aes(x=year, y=lifeExp, group=country, color=country)) +\n  geom_line() +\n  scale_color_manual(values = colours2) + \n  ylab(\"Life expectancy at birth\")\n\n\n\n\n\n\n\n# https://stackoverflow.com/questions/40297206/overlaying-two-plots-using-ggplot2-in-r\nggplot(data = other_countries, \n       mapping = aes(x=year, y=lifeExp, group=country)) +\n  geom_line(col = rgb(0.8,0.8,0.8,0.5)) +\n  geom_line(data = asean_lifexp_since_1900, \n            mapping = aes(x=year, y=lifeExp, group=country,\n                          color=country)) +\n  scale_color_manual(values = colours2) + \n  ylab(\"Life expectancy at birth\")\n\n\n\n\n\n\n\n\n\n\n3.3.3 Scatterplot of 2 continuous variables against each other\n\nasean_2022 %&gt;%\n  ggplot(aes(x=gdpPercap, y=lifeExp)) +\n  geom_point(col = \"dodgerblue\", size = 3) +\n  xlab(\"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)\") +\n  ylab(\"life expectancy at birth, 2022\") +\n  theme_light()\n\n\n\n\n\n\n\n\n\n\n3.3.4 Bubble charts\n(Scatterplots with different-sized circles for different points)\n\nasean_2022 %&gt;%\n  ggplot(aes(x=gdpPercap, y=lifeExp, size=pop)) +\n  geom_point(col = \"dodgerblue\", alpha=0.5) +\n  scale_size(range = c(2, 24), name=\"Population\") +\n  scale_x_log10(limits = c(2500, 170000)) +\n  ylim(65,87) + \n  xlab(\"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)\") +\n  ylab(\"life expectancy at birth, 2022\") +\n  geom_text(aes(x=gdpPercap, y=lifeExp, label = country, size = 5*10^6, vjust = -1)) +\n  theme_light() +\n  #https://www.datanovia.com/en/blog/how-to-remove-legend-from-a-ggplot/\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\nMake a rough match of the plot at https://www.gapminder.org/tools/:\n\nworld_2022 &lt;- big_gapminder_dataset %&gt;%\n  filter(year == \"2022\") %&gt;%\n  filter(country != \"Monaco\") %&gt;% \n  arrange(desc(pop))\n\n# Monaco has a very high GDP per capita, and it doesn't appear in the plot\n# at https://www.gapminder.org/tools/. \n# So remove the data for Monaco with the != (not equal to) operator.\n\n# arrange(desc(pop)) arranges the countries in order from largest population\n# to smallest population. This means that the circles get plotted in order \n# from largest to smallest, so the larger circles don't hide smaller circles.\n\nworld_2022 %&gt;%\n  ggplot(aes(x=gdpPercap, y=lifeExp, size=pop, col=continent)) +\n  geom_point(alpha=0.5) +\n  scale_size(range = c(.1, 24), name=\"Population\") +\n  scale_x_continuous(trans='log10') +\n  guides(size = \"none\") + \n  theme_light() +\n  xlab(\"GDP per capita, 2022 (purchasing power parity, 2017 US dollars)\") +\n  ylab(\"life expectancy at birth, 2022\")\n\n\n\n\n\n\n\n\nThere are a lot of circles here, and we can’t tell which plot is which. It would be nice to reproduce the feature of the plot at the website above, which shows the name of each country each circle represents when you “hover” the mouse over it. It is possible to do this with another R package called plotly. You’ll need to install it before running the code below.\n\nlibrary(plotly)\n\ncontinent_colours &lt;- data.frame(\n  continent = c(\"Africa\", \"Americas\", \"Asia\", \"Europe\"),\n  colour = c(\"rgba(95,210,230,1)\", \"rgba(154,231,71,1)\",\n             \"rgba(237,100,117,1)\", \"rgba(251,230,77,1)\")\n)\n# This command makes a small data.frame assigning colours to continents.\n\n# Plotly doesn't handle rows with missing data in the same way as ggplot2,\n# so include a command to remove rows with missing data.\n\n# is.na() tests whether the thing in brackets is missing.\n# ! means \"not\". So !is.na() tests whether something is not missing.\n# & means \"and\". So the command\n#   filter(!is.na(lifeExp) & !is.na(gdpPercap) & !is.na(pop))\n# means: just keep the rows where \n#    lifeExp is not missing, AND\n#    gdpPercap is not missing, AND\n#    pop is not missing.\nworld_2022v2 &lt;- world_2022 %&gt;%\n  filter(!is.na(lifeExp) & !is.na(gdpPercap) & !is.na(pop)) %&gt;%\n  left_join(continent_colours, by = \"continent\")\n# left_join() is another dplyr function. It adds information from\n# the small continent_colours table we just made to the world_2022\n# table. The two tables are matched using values of \"continent\".\n# This adds a column of colours to the world_2022 table, used for\n# plotting below. So the dplyr cheatsheet mentioned above \n# (https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf) \n# for a nice illustration of how left_join() works.\n\nfig &lt;- plot_ly(world_2022v2, x = ~gdpPercap, y = ~lifeExp, text = ~country,\n               type = \"scatter\", mode = \"markers\",\n               marker = list(size = ~(sqrt((pop)/300000)+0.2), \n                             opacity = 0.8, color = ~colour))\n# https://plotly.com/r/bubble-charts/\nfig &lt;- fig %&gt;% \n  layout(fig, \n         title = \"2022 Gapminder data\",\n         xaxis = list(\n           type = \"log\", \n           title = \"GDP per capita (purchasing power parity, 2017 US dollars)\"),\n         yaxis = list(title = \"life expectancy at birth\"))\n# https://plotly.com/r/figure-labels/\nfig"
  },
  {
    "objectID": "hobart_library draft.html",
    "href": "hobart_library draft.html",
    "title": "Missing Hobart Library",
    "section": "",
    "text": "I miss walking in Hobart. And I miss the Hobart Library. Walk in, sit down, connect to the wifi, and concentrate on something with a magnificent view of Mt Wellington out the window. No registration, no depositing your bag, no handing over your passport, no passwords, plenty of natural light, plenty of places to sit, but enough atmosphere with other people in the library as well.\nI’ve tried sitting in a few libraries\n\nSiam Society Library\nBangkok City Library\nLibrary in Central World\nThammasat University Library\n\nbut none of them do it for me. The Nonthaburi City Library is better: you can just walk in and sit there. However, it doesn’t have air-conditioning, wifi, or many power-points, so I don’t think it’s a long-term option.\nI’ve tried a few co-working spaces: - Samyan Co-op (free): very crowded, hard to find a seat at the times I - True co-working space Asoke - one in Silom (quiet, dark)\nSo I’ve lowered my standards …"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Data, statistics, R",
    "section": "",
    "text": "Some notes for a 2-3 hour workshop"
  },
  {
    "objectID": "index.html#introduction-to-r",
    "href": "index.html#introduction-to-r",
    "title": "Data, statistics, R",
    "section": "",
    "text": "Some notes for a 2-3 hour workshop"
  },
  {
    "objectID": "index.html#statistics-notes",
    "href": "index.html#statistics-notes",
    "title": "Data, statistics, R",
    "section": "Statistics notes",
    "text": "Statistics notes\n\nnothing here yet"
  },
  {
    "objectID": "index.html#websites",
    "href": "index.html#websites",
    "title": "Data, statistics, R",
    "section": "Websites",
    "text": "Websites\n\nA list of some websites with useful information on statistics, R and Quarto"
  },
  {
    "objectID": "hobart_library.html",
    "href": "hobart_library.html",
    "title": "Missing Hobart Library",
    "section": "",
    "text": "I miss walking in Hobart… here in Bangkok it’s normally way too hot to walk anywhere if you don’t want to arrive drenched in sweat! And I miss the Hobart Library. Go in, sit down, connect to the wifi, and concentrate on something with a magnificent view of Mt Wellington off to the side. No registration, no handing over your passport, no depositing your bag, no passwords, plenty of natural light, powerpoints and places to sit, but always other punters around to provide some atmosphere.\nHowever, it’s not all bad news here in Bangkok. I’m planning to write some notes here about my favourite places to sit and work or study. Top of the my list at the moment is where I’m sitting now: Tim Hortons at Samyan Mitrtown."
  }
]